<html>
    <head>
    <title>Secure Scuttlebutt - SSBC</title>
    <link rel="stylesheet" href="/normalize.css">
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/atelier-forest-light.css">
    <script src="/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
    <body>
      <div id="topnav">
    <div id="topnav-inner">
      <a class="topnav-item " href="/" title="Home">
      Home<br><small>SSBC</small>
    </a>
      <a class="topnav-item " href="/patchwork" title="Patchwork">
      Patchwork<br><small>Social Messaging App</small>
    </a>
      <a class="topnav-item " href="/scuttlebot" title="Scuttlebot">
      Scuttlebot<br><small>P2P Log Store</small>
    </a>
      <a class="topnav-item selected" href="/docs" title="Documentation">
      Documentation<br><small>APIs, Articles</small>
    </a>
    </div>
  </div>
      <div id="layout">
        <div id="leftnav">
      <div class="leftnav-item">Key Concepts</div>
      <div class="leftnav-subitems">
        <div class="leftnav-item selected">
      <a href="/secure-scuttlebutt" title="Secure Scuttlebutt: a global database protocol">Secure Scuttlebutt: a global database protocol</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/ssb/linking.html" title="Content-Hash Linking">Content-Hash Linking</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/ssb/secret-handshake.html" title="Secret Handshake: a secure channel protocol">Secret Handshake: a secure channel protocol</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/ssb/end-to-end-encryption.html" title="Private Box: metadata-free encryption">Private Box: metadata-free encryption</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/ssb/faq.html" title="Frequently Asked Questions">Frequently Asked Questions</a>
    </div>
      </div>
      <div class="leftnav-item">API Documentation</div>
      <div class="leftnav-subitems">
        <div class="leftnav-item ">
      <a href="/scuttlebot/api.html" title="scuttlebot">scuttlebot</a>
    </div>
        <div class="leftnav-indent">
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/blobs.html" title="blobs">blobs</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/block.html" title="block">block</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/friends.html" title="friends">friends</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/gossip.html" title="gossip">gossip</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/invite.html" title="invite">invite</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/private.html" title="private">private</a>
    </div>
          <div class="leftnav-item ">
      <a href="/scuttlebot/plugins/replicate.html" title="replicate">replicate</a>
    </div>
        </div>
        <div class="leftnav-item ">
      <a href="/ssb-feed" title="ssb-feed">ssb-feed</a>
    </div>
        <div class="leftnav-item ">
      <a href="/ssb-msgs" title="ssb-msgs">ssb-msgs</a>
    </div>
        <div class="leftnav-item ">
      <a href="/ssb-msg-schemas" title="ssb-msg-schemas">ssb-msg-schemas</a>
    </div>
        <div class="leftnav-item ">
      <a href="/ssb-ref" title="ssb-ref">ssb-ref</a>
    </div>
        <div class="leftnav-item ">
      <a href="/ssb-keys" title="ssb-keys">ssb-keys</a>
    </div>
        <div class="leftnav-item ">
      <a href="/ssb-config" title="ssb-config">ssb-config</a>
    </div>
        <div class="leftnav-item ">
      <a href="/secret-stack" title="secret-stack">secret-stack</a>
    </div>
        <div class="leftnav-item ">
      <a href="/muxrpc" title="muxrpc">muxrpc</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/api/pull-stream.html" title="pull-stream">pull-stream</a>
    </div>
      </div>
      <div class="leftnav-item">Articles</div>
      <div class="leftnav-subitems">
        <div class="leftnav-item ">
      <a href="/docs/articles/design-challenge-avoid-centralization-and-singletons.html" title="Design Challenge: Avoiding Centralization and Singletons">Design Challenge: Avoiding Centralization and Singletons</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/articles/design-challenge-sybil-attack.html" title="Design Challenge: Sybil Attacks">Design Challenge: Sybil Attacks</a>
    </div>
        <div class="leftnav-item ">
      <a href="/docs/articles/using-trust-in-open-networks.html" title="Using Trust in Open Networks">Using Trust in Open Networks</a>
    </div>
      </div>
    </div>
        <div id="content">
          <h1 id="secure-scuttlebutt">Secure Scuttlebutt</h1>
<p>Secure Scuttlebutt is a database protocol for unforgeable append-only message feeds.</p>
<p>&quot;Unforgeable&quot; means that only the owner of a feed can update that feed, as enforced by digital signing (see <a href="#security-properties">Security properties</a>).
This property makes Secure Scuttlebutt useful for peer-to-peer applications.
Secure Scuttlebutt also makes it easy to encrypt messages.</p>
<h2 id="concepts">Concepts</h2>
<p>Building upon Secure Scuttlebutt requires understanding a few concepts that it uses to ensure the unforgeability of message feeds.</p>
<h3 id="identities">Identities</h3>
<p>An identity is simply a <a href="http://ed25519.cr.yp.to/">ed25519 key pair</a>.
The public key is used as the identifier.</p>
<p>There is no worldwide store of identities.
Users must exchange pubkeys, either by publishing them on their feeds, or out-of-band.</p>
<h3 id="feeds">Feeds</h3>
<p>A feed is a signed append-only sequence of messages.
Each identity has exactly one feed.</p>
<p>Note that append-only means you cannot delete an existing message, or change your history.
This is enforced by a per-feed blockchain.
This is to ensure the entire network converges on the same state.</p>
<h3 id="messages">Messages</h3>
<p>Each message contains:</p>
<ul>
<li>A signature</li>
<li>The signing public key</li>
<li>A content-hash of the previous message</li>
<li>A sequence number</li>
<li>A timestamp</li>
<li>An identifier of the hashing algorithm in use (currently only &quot;sha256&quot; is supported)</li>
<li>A content object</li>
</ul>
<p>Here&#39;s an example message:</p>
<pre><code class="lang-js">{
  &quot;previous&quot;: &quot;%26AC+gU0t74jRGVeDY013cVghlZRc0nfUAnMnutGGHM=.sha256&quot;,
  &quot;author&quot;: &quot;@hxGxqPrplLjRG2vtjQL87abX4QKqeLgCwQpS730nNwE=.ed25519&quot;,
  &quot;sequence&quot;: 216,
  &quot;timestamp&quot;: 1442590513298,
  &quot;hash&quot;: &quot;sha256&quot;,
  &quot;content&quot;: {
    &quot;type&quot;: &quot;vote&quot;,
    &quot;vote&quot;: {
      &quot;link&quot;: &quot;%WbQ4dq0m/zu5jxll9zUbe0iGmDOajCx1ZkLKjZ80JvI=.sha256&quot;,
      &quot;value&quot;: 1
    }
  },
  &quot;signature&quot;: &quot;Sjq1C3yiKdmi1TWvNqxIk1ZQBf4pPJYl0HHRDVf/xjm5tWJHBaW4kXo6mHPcUMbJYUtc03IvPwVqB+BMnBgmAQ==.sig.ed25519&quot;
}
</code></pre>
<h3 id="entity-references-links-">Entity References (Links)</h3>
<p>Messages can reference three types of Secure Scuttlebutt entities: messages, feeds, and blobs (i.e. files).
Messages and blobs are referred to by their hashes, but a feed is referred to by its signing public key.</p>
<p><a href="https://ssbc.github.io/docs/ssb/linking.html">&raquo; Content-Hash Links</a></p>
<h3 id="confidentiality">Confidentiality</h3>
<p>For private sharing, Scuttlebot uses <a href="http://doc.libsodium.org/">libsodium</a> to encrypt confidential log-entries.
Feed IDs are public keys, and so once two feeds are mutually following each other, they can exchange confidential data freely.</p>
<p><a href="https://ssbc.github.io/docs/ssb/end-to-end-encryption.html">&raquo; Private Box</a></p>
<h3 id="following">Following</h3>
<p>Users choose which feeds to synchronize by following them.
Presently, <a href="https://ssbc.github.io/scuttlebot/plugins/replicate.html">Scuttlebot&#39;s replicate plugin</a>, which is enabled by default, looks on the master user&#39;s feed for <a href="https://ssbc.github.io/ssb-msg-schemas">type: contact</a> messages to know which users are currently followed.</p>
<h3 id="replication">Replication</h3>
<p>Since feeds are append-only, replication is simple: request all messages in the feed that are newer than the latest message you know about.
Scuttlebot maintains a table of known peers, which it cycles through, asking for updates for all followed feeds.</p>
<h3 id="gossip">Gossip</h3>
<p>The protocol creates a <a href="https://en.wikipedia.org/wiki/Gossip_protocol">global gossip network</a>.
This means that information is able to distribute across multiple machines, without requiring direct connections between them.</p>
<p><img src="https://ssbc.github.io/docs/gossip-graph1.png" alt="Gossip graph"></p>
<p>Even though Alice and Dan lack a direct connection, they can still exchange feeds:</p>
<p><img src="https://ssbc.github.io/docs/gossip-graph2.png" alt="Gossip graph 2"></p>
<p>This is because gossip creates &quot;transitive&quot; connections between computers.
Dan&#39;s messages travel through Carla and the Pub to reach Alice, and visa-versa.</p>
<h3 id="lan-connectivity">LAN connectivity</h3>
<p>SSB is hostless: each computer installs the same copy of software and has equal rights in the network.
Devices discover each other over the LAN with multicast UDP and sync automatically.</p>
<h3 id="pub-servers">Pub Servers</h3>
<p>To sync across the Internet, &quot;Pub&quot; nodes run at public IPs and follow users.
They are essentially mail-bots which improve uptime and availability.
Users generate invite-codes to command Pubs to follow their friends.
The SSB team runs some Pubs, but anybody can create and introduce their own.</p>
<h2 id="security-properties">Security properties</h2>
<p>Secure Scuttlebutt maintains useful security properties even when it is connected to a malicious Secure Scuttlebutt database.
This makes it ideal as a store for peer-to-peer applications.</p>
<p>Imagine that we want to read from a feed for which we know the identity, but we&#39;re connected to a malicious Secure Scuttlebutt instance.
As long as the malicious database does not have the private key:</p>
<ul>
<li>The malicious database cannot create a new feed with the same identifier</li>
<li>The malicious database cannot write new fake messages to the feed</li>
<li>The malicious database cannot reorder the messages in the feed</li>
<li>The malicious database cannot send us a new copy of the feed that omits messages from the middle</li>
<li>The malicious database <em>can</em> refuse to send us the feed, or only send us the first <em>N</em> messages in the feed</li>
<li>Messages may optionally be encrypted</li>
</ul>
<p>Additionally there is a protection from the feed owner, through the blockchain.
The <code>previous</code> content-hash them from changing the feed history after publishing, as a newly-created message wouldn&#39;t match the hash of later messages which were already replicated.
This ensures the append-only constraint, and thus safe network convergence.</p>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://ssbc.github.io/docs/articles/design-challenge-avoid-centralization-and-singletons.html">Design Challenge: Avoid Centralization and Singletons</a></li>
<li><a href="https://ssbc.github.io/docs/articles/design-challenge-sybil-attack.html">Design Challenge: Sybil Attacks</a></li>
<li><a href="https://ssbc.github.io/docs/articles/using-trust-in-open-networks.html">Using Trust in Open Networks</a></li>
</ul>

        </div>
      </div>
    </body>
  </html>